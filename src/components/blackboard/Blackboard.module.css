.frame {
  background: var(--board-frame-bg);
  border-radius: var(--r-xl);
  padding: 3px;
  box-shadow: var(--shadow-xl);
  position: relative;
  transition: box-shadow 0.4s ease;
}

/* Wood frame */
.frame::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: calc(var(--r-xl) + 1px);
  background: var(--board-frame-edge);
  z-index: -1;
}

/* Flash states */
.flashCorrect {
  animation: board-flash-green 0.6s ease forwards;
}
.flashWrong {
  animation: board-flash-red 0.5s ease forwards;
}

.surface {
  border-radius: calc(var(--r-xl) - 3px);
  background:
    radial-gradient(ellipse at 20% 15%, var(--board-surface-vignette-a) 0%, transparent 55%),
    radial-gradient(ellipse at 80% 85%, var(--board-surface-vignette-b) 0%, transparent 55%),
    var(--board-surface-grad);
  padding: var(--sp-5);
  height: 100%;
  position: relative;
  overflow: hidden;
}

.surface::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)'/%3E%3C/svg%3E");
  opacity: var(--board-noise-opacity);
  mix-blend-mode: multiply;
  pointer-events: none;
}

/* Chalk ruled lines */
.surface::after {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 29px,
    var(--board-rule-color) 29px,
    var(--board-rule-color) 30px
  );
  pointer-events: none;
}

.surface > * {
  position: relative;
  z-index: 1;
}

/* Variant: flat */
.flat { background: none; padding: 0; box-shadow: none; }
.flat::before { display: none; }
.flat .surface { background: var(--bg-surface); border: var(--border-dim); border-radius: var(--r-lg); }
